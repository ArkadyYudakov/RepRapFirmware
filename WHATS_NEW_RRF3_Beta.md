RepRapFirmware 3.3beta1
=======================

Changes listed here are since version 3.2.2. Changes that were originally listed here but were back-ported to release 3.2.2 are no longer described here.

Compatible firmware versions (all the same as in the RepRapFirmware 3.2.2 release):
- Duet Web Control 3.2.2
- Duet Software Framework 3.2.2 (for users with attached Single Board Computer)
- DuetWiFiServer 1.25

Upgrade notes:
- All extruders must be declared explicitly using M584. In previous firmware versions, one default extruder was assign to driver 3.
- Firmware files are now stored in folder /firmware of the SD card instead of /sys
- Unless you are running with an attached SBC, you must also upload the new Duetx_SDiap32_xxx.bin file for your board. Until you do, you will not be able to upgrade/downgrade from 3.3beta1 firmware to other versions. The new IAP files have the same names as the previous IAP files for RRF3.2 and 3.2.2 and will also work with those versions of RRF.
- [Duet 3 + expansion/tool boards] You must update the expansion and/or tool board firmware to 3.3beta1 also, otherwise movement and some other functions will not work. If you accidentally end up with firmware 3.3beta on a tool or expansion board and 3.2.x on the main board then the tool/expansoin board will not achieve CAN sync with the main board; however it will still respond to some commands including M115, M122 and M997.
- For Duet 2, Duet 3 MB6HC and Duet Maestro, the hardware abstraction layer has been switched from CoreNG to CoreN2G. This is a major change, so there is a greater than usual chance that something has stopped working, e.g. an input or output pin might fail to work in a particular mode.

New features:
- M17 is implemented
- G17, G18 and G19 are now supported. Please test G18 and G19 carefully before using for real in CNC applications!
- Print time in GCode files sliced by IdeaMaker is now recognised
- Added M595 R parameter (thanks markmaker)
- Increased the number of build plate objects tracked from 32 to 40 on Duet 3 and 3 Mini
- [Duet WiFi/Ethernet] When using extended step timings (M569 T parameter), maximum step pulse rates are improved a little
- [Duet 3 Mini] M954 is partially implemented. A Duet 3 Mini used as an expansion board can support axis motors, extruder motors (but extruders with nonzero pressure advance has not been tested), thermistor, PT100 and thermocouple temperature sensors, GpIn and GpOut pins (including servos). Heaters, fans, filament monitors, endstop switches, Z probes and other types of temperature sensor are not yet supported.
- [Duet 3 MB6HC] The maximum number of axes supported on Duet 3 MB6HC is increased to 15. Axis letters abcdefghijkl may be used in addition to XYZUVWABCD. Because GCode is normally case insensitive, these must be prefixed with a single quote character in GCode commands. For example, M584 'A1.2 would assign axis 'a' to driver 1.2, and G1 'A10 would move the 'a' axis to the 10mm or 10 degree position (or by 10mm or 10 degrees if in relative mode).
- [Duet 3 main boards] M122 now reports the peak CAN time sync message transmit delay
- [Duet 3 + expansion/tool boards] Improved the accuracy of CAN clock synchronisation between main and expansion boards
- [Duet 3 expansion/tool boards] Increased maximum step rates on on tool and expansion boards, especially on EXP1XD boards
- [Duet 3 EXP1XD] All step pulses generated by the EXP1XD now have exactly the same step high time as set by M569. The first M569 T value (step high time) will be rounded up to the next multiple of 0.0833us subject to a minimum of 0.25us (previously it was rounded up to the next multiple of 1.33us). The remaining T values will be rounded up to the next multiple of 1.33us as before. The fourth T value (direction hold time from trailing edge of step pulse) can now be negative, down to minus the step-high time.
- [Duet 3 expansion/tool boards] M122 now reports CAN clock sync jitter, peak receive delay, steps commanded and steps generated.
- [SAMMYC21] The sample firmware for SAMMYC21 now sends a diagnostic report to the USB port if character D is received from the USB port

Bug fixes:
- It was not possible to delete a temperature sensor using M308 S# P"nil"
- When a sensor was configured on a CAN expansion board and M308 was subsequently used to create a sensor with the same number on a different board, the old sensor was not deleted
- [Duet 3 Mini] DHT sensors did not work. DHT sensors on the Duet 3 Mini now require both an output pin and an input pin. Note, support for DHT11 is likely to be removed soon.
- [Duet 3 expansion/tool boards] Under certain conditions, moves could be omitted. We have only been able to reproduce this when using high step pulse rates.
- [Duet 3 expansion/tool boards] Under conditions of heavy load (e.g. a series of short moves at high step pulse rates), the board could stop responding to CAN commands and lose CAN sync
